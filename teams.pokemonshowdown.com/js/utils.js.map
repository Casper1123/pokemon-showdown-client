{"version":3,"file":"utils.js","names":["HttpError","_Error","message","statusCode","body","_this","call","name","Error","captureStackTrace","_unused","_inheritsLoose","_wrapNativeSuper","NetRequest","uri","_proto","prototype","get","_this2","opts","arguments","length","undefined","Promise","resolve","reject","xhr","XMLHttpRequest","query","includes","Net","encodeQuery","open","method","onreadystatechange","DONE","readyState","status","responseText","err","statusText","setRequestHeader","send","post","Object","assign","startsWith","defaultRoute","document","location","protocol","data","urlencodedData","key","encodeURIComponent","decodeQuery","queryData","out","questionIndex","indexOf","slice","_i2","_queryData$split2","split","queryPart","_queryPart$split","value","decodeURIComponent","PSSubscription","observable","listener","_proto2","unsubscribe","index","subscriptions","splice","PSModel","_proto3","subscribe","subscription","push","subscribeAndRun","update","_i4","_this$subscriptions2","PSStreamModel","updates","_proto4","_i6","_this$updates2","_i8","_this$subscriptions4","PSIcon","_preact$Component","apply","_proto5","render","props","pokemon","preact","h","style","background","Dex","getPokemonIcon","replace","item","className","getItemIcon","type","types","sanitizedType","src","resourcePrefix","alt","hideAlt","height","width","category","categoryID","toID","sanitizedCategory","charAt","toUpperCase","Component","unpackTeam","buf","team","_i0","_buf$split2","setBuf","parts","set","species","moves","items","ability","baseSpecies","abilities","map","moveid","nature","evs","hp","Number","atk","def","spa","spd","spe","gender","ivs","shiny","level","parseInt","misc","happiness","hpType","pokeball","gigantamax","dynamaxLevel","teraType","MiniTeam","_preact$Component2","_proto6","Fragment","color","textDecoration","href","teamid","title","fullTeam","x","getShowdownUsername","vals","cookie","_i10","_cookie$split","part","rest","join","act","then","resultText","result","JSON","parse","_unused2","actionerror"],"sources":["../src/utils.tsx"],"sourcesContent":["/**********************************************************************\r\n * Net\r\n *********************************************************************/\r\n/** @jsx preact.h */\r\n/** @jsxFrag preact.Fragment */\r\nimport preact from \"../../play.pokemonshowdown.com/js/lib/preact\";\r\nimport { Dex } from \"../../play.pokemonshowdown.com/src/battle-dex\";\r\n\r\ndeclare const toID: (str: any) => string;\r\n\r\nexport interface PostData {\r\n\t[key: string]: string | number | undefined;\r\n}\r\nexport interface NetRequestOptions {\r\n\tmethod?: 'GET' | 'POST';\r\n\tbody?: string | PostData;\r\n\tquery?: PostData;\r\n}\r\nexport class HttpError extends Error {\r\n\tstatusCode?: number;\r\n\tbody: string;\r\n\tconstructor(message: string, statusCode: number | undefined, body: string) {\r\n\t\tsuper(message);\r\n\t\tthis.name = 'HttpError';\r\n\t\tthis.statusCode = statusCode;\r\n\t\tthis.body = body;\r\n\t\ttry {\r\n\t\t\t(Error as any).captureStackTrace(this, HttpError);\r\n\t\t} catch {}\r\n\t}\r\n}\r\nexport class NetRequest {\r\n\turi: string;\r\n\tconstructor(uri: string) {\r\n\t\tthis.uri = uri;\r\n\t}\r\n\r\n\t/**\r\n\t * Makes a basic http/https request to the URI.\r\n\t * Returns the response data.\r\n\t *\r\n\t * Will throw if the response code isn't 200 OK.\r\n\t *\r\n\t * @param opts request opts\r\n\t */\r\n\tget(opts: NetRequestOptions = {}): Promise<string> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\tlet uri = this.uri;\r\n\t\t\tif (opts.query) {\r\n\t\t\t\turi += (uri.includes('?') ? '&' : '?') + Net.encodeQuery(opts.query);\r\n\t\t\t}\r\n\t\t\txhr.open(opts.method || 'GET', uri);\r\n\t\t\txhr.onreadystatechange = function () {\r\n\t\t\t\tconst DONE = 4;\r\n\t\t\t\tif (xhr.readyState === DONE) {\r\n\t\t\t\t\tif (xhr.status === 200) {\r\n\t\t\t\t\t\tresolve(xhr.responseText || '');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst err = new HttpError(xhr.statusText || \"Connection error\", xhr.status, xhr.responseText);\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (opts.body) {\r\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\txhr.send(Net.encodeQuery(opts.body));\r\n\t\t\t} else {\r\n\t\t\t\txhr.send();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Makes a http/https POST request to the given link.\r\n\t * @param opts request opts\r\n\t * @param body POST body\r\n\t */\r\n\tpost(opts: Omit<NetRequestOptions, 'body'>, body: PostData | string): Promise<string>;\r\n\t/**\r\n\t * Makes a http/https POST request to the given link.\r\n\t * @param opts request opts\r\n\t */\r\n\tpost(opts?: NetRequestOptions): Promise<string>;\r\n\tpost(opts: NetRequestOptions = {}, body?: PostData | string) {\r\n\t\tif (!body) body = opts.body;\r\n\t\treturn this.get({\r\n\t\t\t...opts,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function Net(uri: string) {\r\n\tif (uri.startsWith('/') && !uri.startsWith('//') && Net.defaultRoute) uri = Net.defaultRoute + uri;\r\n\tif (uri.startsWith('//') && document.location.protocol === 'file:') uri = 'https:' + uri;\r\n\treturn new NetRequest(uri);\r\n}\r\n\r\n/** Prepends URLs starting with `/` with this string. Used by testclient. */\r\nNet.defaultRoute = '';\r\n\r\nNet.encodeQuery = function (data: string | PostData) {\r\n\tif (typeof data === 'string') return data;\r\n\tlet urlencodedData = '';\r\n\tfor (const key in data) {\r\n\t\tif ((data as any)[key] === undefined) continue;\r\n\t\tif (urlencodedData) urlencodedData += '&';\r\n\t\turlencodedData += encodeURIComponent(key) + '=' + encodeURIComponent((data as any)[key]);\r\n\t}\r\n\treturn urlencodedData;\r\n};\r\nNet.decodeQuery = function (queryData: string): { [key: string]: string } {\r\n\tlet out: { [key: string]: string } = {};\r\n\tconst questionIndex = queryData.indexOf('?');\r\n\tif (questionIndex >= 0) queryData = queryData.slice(questionIndex + 1);\r\n\tfor (const queryPart of queryData.split('&')) {\r\n\t\tconst [key, value] = queryPart.split('=');\r\n\t\tout[decodeURIComponent(key)] = decodeURIComponent(value || '');\r\n\t}\r\n\treturn out;\r\n};\r\n\r\n/**********************************************************************\r\n * Models\r\n *********************************************************************/\r\n\r\nexport class PSSubscription {\r\n\tobservable: PSModel | PSStreamModel<any>;\r\n\tlistener: (value?: any) => void;\r\n\tconstructor(observable: PSModel | PSStreamModel<any>, listener: (value?: any) => void) {\r\n\t\tthis.observable = observable;\r\n\t\tthis.listener = listener;\r\n\t}\r\n\tunsubscribe() {\r\n\t\tconst index = this.observable.subscriptions.indexOf(this);\r\n\t\tif (index >= 0) this.observable.subscriptions.splice(index, 1);\r\n\t}\r\n}\r\n\r\n/**\r\n * PS Models roughly implement the Observable spec. Not the entire\r\n * spec - just the parts we use. PSModel just notifies subscribers of\r\n * updates - a simple model for React.\r\n */\r\nexport class PSModel {\r\n\tsubscriptions = [] as PSSubscription[];\r\n\tsubscribe(listener: () => void) {\r\n\t\tconst subscription = new PSSubscription(this, listener);\r\n\t\tthis.subscriptions.push(subscription);\r\n\t\treturn subscription;\r\n\t}\r\n\tsubscribeAndRun(listener: () => void) {\r\n\t\tconst subscription = this.subscribe(listener);\r\n\t\tsubscription.listener();\r\n\t\treturn subscription;\r\n\t}\r\n\tupdate() {\r\n\t\tfor (const subscription of this.subscriptions) {\r\n\t\t\tsubscription.listener();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * PS Models roughly implement the Observable spec. PSStreamModel\r\n * streams some data out. This is very not-React, which generally\r\n * expects the DOM to be a pure function of state. Instead PSModels\r\n * which hold state, PSStreamModels give state directly to views,\r\n * so that the model doesn't need to hold a redundant copy of state.\r\n */\r\nexport class PSStreamModel<T = string> {\r\n\tsubscriptions = [] as PSSubscription[];\r\n\tupdates = [] as T[];\r\n\tsubscribe(listener: (value: T) => void) {\r\n\t\t// TypeScript bug\r\n\t\tconst subscription: PSSubscription = new PSSubscription(this, listener);\r\n\t\tthis.subscriptions.push(subscription);\r\n\t\tif (this.updates.length) {\r\n\t\t\tfor (const update of this.updates) {\r\n\t\t\t\tsubscription.listener(update);\r\n\t\t\t}\r\n\t\t\tthis.updates = [];\r\n\t\t}\r\n\t\treturn subscription;\r\n\t}\r\n\tsubscribeAndRun(listener: (value: T) => void) {\r\n\t\tconst subscription = this.subscribe(listener);\r\n\t\tsubscription.listener(null);\r\n\t\treturn subscription;\r\n\t}\r\n\tupdate(value: T) {\r\n\t\tif (!this.subscriptions.length) {\r\n\t\t\t// save updates for later\r\n\t\t\tthis.updates.push(value);\r\n\t\t}\r\n\t\tfor (const subscription of this.subscriptions) {\r\n\t\t\tsubscription.listener(value);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class PSIcon extends preact.Component<{\r\n\tpokemon?: string, item?: string, type?: string, category?: string, hideAlt?: boolean,\r\n}> {\r\n\trender() {\r\n\t\tif (this.props.pokemon) {\r\n\t\t\treturn <span\r\n\t\t\t\tclass=\"picon\"\r\n\t\t\t\tstyle={{ background: Dex.getPokemonIcon(this.props.pokemon).replace('background:', '') }}\r\n\t\t\t></span>;\r\n\t\t} else if (this.props.item) {\r\n\t\t\treturn <span\r\n\t\t\t\tclassName=\"itemicon\"\r\n\t\t\t\tstyle={{ background: Dex.getItemIcon(this.props.item).replace('background:', '') }}\r\n\t\t\t></span>;\r\n\t\t} else if (this.props.type) {\r\n\t\t\tlet type = Dex.types.get(this.props.type).name;\r\n\t\t\tif (!type) type = '???';\r\n\t\t\tlet sanitizedType = type.replace(/\\?/g, '%3f');\r\n\t\t\treturn <img\r\n\t\t\t\tsrc={`${Dex.resourcePrefix}sprites/types/${sanitizedType}.png`}\r\n\t\t\t\talt={this.props.hideAlt ? undefined : type}\r\n\t\t\t\theight=\"14\"\r\n\t\t\t\twidth=\"32\"\r\n\t\t\t\tclass=\"pixelated\"\r\n\t\t\t/>;\r\n\t\t} else if (this.props.category) {\r\n\t\t\tconst categoryID = toID(this.props.category);\r\n\t\t\tlet sanitizedCategory = '';\r\n\t\t\tswitch (categoryID) {\r\n\t\t\tcase 'physical':\r\n\t\t\tcase 'special':\r\n\t\t\tcase 'status':\r\n\t\t\t\tsanitizedCategory = categoryID.charAt(0).toUpperCase() + categoryID.slice(1);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tsanitizedCategory = 'undefined';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn <img\r\n\t\t\t\tsrc={`${Dex.resourcePrefix}sprites/categories/${sanitizedCategory}.png`}\r\n\t\t\t\talt={this.props.hideAlt ? undefined : sanitizedCategory}\r\n\t\t\t\theight=\"14\"\r\n\t\t\t\twidth=\"32\"\r\n\t\t\t\tclass=\"pixelated\"\r\n\t\t\t/>;\r\n\t\t} else {\r\n\t\t\treturn <span></span>;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport type ServerTeam = {\r\n\tteamid: string,\r\n\tformat: string,\r\n\tprivate: string,\r\n\tteam: string,\r\n\tname?: string,\r\n\ttitle?: string,\r\n};\r\n\r\nexport function unpackTeam(buf: string) {\r\n\tif (!buf) return [];\r\n\r\n\tlet team: Dex.PokemonSet[] = [];\r\n\r\n\tfor (const setBuf of buf.split(`]`)) {\r\n\t\tconst parts = setBuf.split(`|`);\r\n\t\tif (parts.length < 11) continue;\r\n\t\tlet set: Dex.PokemonSet = { species: '', moves: [] };\r\n\t\tteam.push(set);\r\n\r\n\t\t// name\r\n\t\tset.name = parts[0];\r\n\r\n\t\t// species\r\n\t\tset.species = Dex.species.get(parts[1]).name || set.name;\r\n\r\n\t\t// item\r\n\t\tset.item = Dex.items.get(parts[2]).name;\r\n\r\n\t\t// ability\r\n\t\tconst species = Dex.species.get(set.species);\r\n\t\tset.ability =\r\n\t\t\tparts[3] === '-' ? '' :\r\n\t\t\t(species.baseSpecies === 'Zygarde' && parts[3] === 'H') ? 'Power Construct' :\r\n\t\t\t['', '0', '1', 'H', 'S'].includes(parts[3]) ?\r\n\t\t\t\tspecies.abilities[parts[3] as '0' || '0'] || (parts[3] === '' ? '' : '!!!ERROR!!!') :\r\n\t\t\t\tDex.abilities.get(parts[3]).name;\r\n\r\n\t\t// moves\r\n\t\tset.moves = parts[4].split(',').map(moveid =>\r\n\t\t\tDex.moves.get(moveid).name\r\n\t\t);\r\n\r\n\t\t// nature\r\n\t\tset.nature = parts[5] as Dex.NatureName;\r\n\t\tif (set.nature as any === 'undefined') set.nature = undefined;\r\n\r\n\t\t// evs\r\n\t\tif (parts[6]) {\r\n\t\t\tif (parts[6].length > 5) {\r\n\t\t\t\tconst evs = parts[6].split(',');\r\n\t\t\t\tset.evs = {\r\n\t\t\t\t\thp: Number(evs[0]) || 0,\r\n\t\t\t\t\tatk: Number(evs[1]) || 0,\r\n\t\t\t\t\tdef: Number(evs[2]) || 0,\r\n\t\t\t\t\tspa: Number(evs[3]) || 0,\r\n\t\t\t\t\tspd: Number(evs[4]) || 0,\r\n\t\t\t\t\tspe: Number(evs[5]) || 0,\r\n\t\t\t\t};\r\n\t\t\t} else if (parts[6] === '0') {\r\n\t\t\t\tset.evs = { hp: 0, atk: 0, def: 0, spa: 0, spd: 0, spe: 0 };\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// gender\r\n\t\tif (parts[7]) set.gender = parts[7];\r\n\r\n\t\t// ivs\r\n\t\tif (parts[8]) {\r\n\t\t\tconst ivs = parts[8].split(',');\r\n\t\t\tset.ivs = {\r\n\t\t\t\thp: ivs[0] === '' ? 31 : Number(ivs[0]),\r\n\t\t\t\tatk: ivs[1] === '' ? 31 : Number(ivs[1]),\r\n\t\t\t\tdef: ivs[2] === '' ? 31 : Number(ivs[2]),\r\n\t\t\t\tspa: ivs[3] === '' ? 31 : Number(ivs[3]),\r\n\t\t\t\tspd: ivs[4] === '' ? 31 : Number(ivs[4]),\r\n\t\t\t\tspe: ivs[5] === '' ? 31 : Number(ivs[5]),\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// shiny\r\n\t\tif (parts[9]) set.shiny = true;\r\n\r\n\t\t// level\r\n\t\tif (parts[10]) set.level = parseInt(parts[9], 10);\r\n\r\n\t\t// happiness\r\n\t\tif (parts[11]) {\r\n\t\t\tlet misc = parts[11].split(',');\r\n\t\t\tset.happiness = (misc[0] ? Number(misc[0]) : undefined);\r\n\t\t\tset.hpType = misc[1];\r\n\t\t\tset.pokeball = misc[2];\r\n\t\t\tset.gigantamax = !!misc[3];\r\n\t\t\tset.dynamaxLevel = (misc[4] ? Number(misc[4]) : 10);\r\n\t\t\tset.teraType = misc[5];\r\n\t\t}\r\n\t}\r\n\r\n\treturn team;\r\n}\r\n\r\nexport class MiniTeam extends preact.Component<{ team: ServerTeam, fullTeam?: boolean }> {\r\n\trender() {\r\n\t\tconst team = this.props.team;\r\n\t\treturn <>\r\n\t\t\t<a\r\n\t\t\t\tclass=\"team\"\r\n\t\t\t\tstyle={{ color: 'black', textDecoration: 'none' }}\r\n\t\t\t\thref={`/view/${team.teamid}${team.private ? `-${team.private}` : ''}`}\r\n\t\t\t>\r\n\t\t\t\t<strong>\r\n\t\t\t\t\t{team.name || team.title || \"Untitled \" + team.teamid}\r\n\t\t\t\t\t{team.private ? <> <i class=\"fa fa-lock\"></i></> : <></>}\r\n\t\t\t\t</strong>\r\n\t\t\t\t<br />\r\n\t\t\t\t<small>\r\n\t\t\t\t\t{(this.props.fullTeam ?\r\n\t\t\t\t\t\tunpackTeam(team.team).map(x => x.species) :\r\n\t\t\t\t\t\tteam.team.split(',')\r\n\t\t\t\t\t).map(x => <PSIcon pokemon={x} />) || <em>(Empty team)</em>}\r\n\t\t\t\t</small>\r\n\t\t\t</a>\r\n\t\t</>;\r\n\t}\r\n}\r\n\r\nexport function getShowdownUsername() {\r\n\tconst vals = document.cookie.split(';');\r\n\tfor (let cookie of vals) {\r\n\t\tconst [part, ...rest] = cookie.split('=');\r\n\t\tconst data = decodeURIComponent(rest.join('='));\r\n\t\tif (toID(part) === 'showdownusername' || toID(part) === 'sid') {\r\n\t\t\treturn data.split(',')[0];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function query(act: string, opts?: NetRequestOptions) {\r\n\treturn Net('/api/' + act).get(opts).then(resultText => {\r\n\t\tif (resultText.startsWith(']')) resultText = resultText.slice(1);\r\n\t\tlet result;\r\n\t\ttry {\r\n\t\t\tresult = JSON.parse(resultText);\r\n\t\t} catch {\r\n\t\t\tresult = { actionerror: \"Malformed response received. Try again later.\" };\r\n\t\t}\r\n\t\treturn result;\r\n\t});\r\n}\r\n"],"mappings":"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","ignoreList":[]}