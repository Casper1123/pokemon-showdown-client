{"version":3,"file":"panel-teambuilder.js","names":["TeambuilderRoom","_PSRoom","_this","_len","arguments","length","args","Array","_key","call","apply","concat","DEFAULT_FORMAT","Dex","gen","curFolder","curFolderKeep","clientCommands","parseClientCommands","newteam","target","isBox","includes","PS","teams","push","createTeam","unshift","update","deleteteam","team","byKey","undeleteteam","undelete","_inheritsLoose","_proto","prototype","sendDirect","msg","alert","copyFrom","undefined","name","format","folder","packedTeam","iconCache","key","endsWith","window","FormatModMapping","modid","BattleTeambuilderTable","loadModData","slice","list","PSRoom","TeambuilderPanel","_PSRoomPanel","_this2","_len2","_key2","selectFolder","e","room","props","elem","getAttribute","className","parentElement","preventDefault","stopImmediatePropagation","prompt","parentElem","okButton","then","forceUpdate","addFormatFolder","ev","button","currentTarget","toID","value","dragEnterTeam","_ev$currentTarget","draggedTeam","getDraggedTeam","iOver","indexOf","dragging","iDragged","splice","dragEnterFolder","_ev$currentTarget2","_PS$dragging","type","dragLeaveFolder","_ev$currentTarget3","_PS$dragging2","dropFolder","_ev$currentTarget4","_PS$dragging3","addDraggedTeam","save","_proto2","_PS$dragging4","_ref","dataTransfer","console","log","types","files","map","file","extractDraggedTeam","_ev$dataTransfer","_file$text","toLowerCase","text","result","sets","PSTeambuilder","importTeam","_unused","bracketIndex","startsWith","trim","Teams","pack","_PS$dragging5","_this$extractDraggedT","index","pop","join","handleDrop","_PS$rooms$teambuilder","rooms","renderFolder","_PS$dragging6","cur","children","folderOpenIcon","preact","h","active","onDragEnter","onDragLeave","onDrop","renderFolderList","folderTable","folders","_i2","_PS$teams$list2","PSUtils","sortBy","parseInt","charAt","renderedFormatFolders","onChange","renderedFolders","_i4","newGen","onClick","render","_PS$dragging7","_this3","isDragging","deletedTeams","undeleteIndex","filterFolder","filterFormat","filter","PSPanelWrapper","style","_team$uploaded","TeamBox","uploaded","teamid","PSRoomPanel","id","routes","Model","icon","title","addRoomType"],"sources":["../src/panel-teambuilder.tsx"],"sourcesContent":["/**\r\n * Teambuilder panel\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport { PS, PSRoom, type RoomID, type Team } from \"./client-main\";\r\nimport { PSPanelWrapper, PSRoomPanel } from \"./panels\";\r\nimport { PSTeambuilder, TeamBox } from \"./panel-teamdropdown\";\r\nimport { Dex, PSUtils, toID, type ID } from \"./battle-dex\";\r\nimport { Teams } from \"./battle-teams\";\r\n\r\nclass TeambuilderRoom extends PSRoom {\r\n\treadonly DEFAULT_FORMAT = `gen${Dex.gen}` as ID;\r\n\r\n\t/**\r\n\t * - `\"\"` - all\r\n\t * - `\"gen[NUMBER][ID]\"` - format folder\r\n\t * - `\"gen[NUMBER]\"` - uncategorized gen folder\r\n\t * - `\"[ID]/\"` - folder\r\n\t * - `\"/\"` - not in folder\r\n\t */\r\n\tcurFolder = '';\r\n\tcurFolderKeep = '';\r\n\r\n\toverride clientCommands = this.parseClientCommands({\r\n\t\t'newteam'(target) {\r\n\t\t\tconst isBox = ` ${target} `.includes(' box ');\r\n\t\t\tif (` ${target} `.includes(' bottom ')) {\r\n\t\t\t\tPS.teams.push(this.createTeam(null, isBox));\r\n\t\t\t} else {\r\n\t\t\t\tPS.teams.unshift(this.createTeam(null, isBox));\r\n\t\t\t}\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'deleteteam'(target) {\r\n\t\t\tconst team = PS.teams.byKey[target];\r\n\t\t\tif (team) PS.teams.delete(team);\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'undeleteteam'() {\r\n\t\t\tPS.teams.undelete();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t});\r\n\toverride sendDirect(msg: string): void {\r\n\t\tPS.alert(`Unrecognized command: ${msg}`);\r\n\t}\r\n\r\n\tcreateTeam(copyFrom?: Team | null, isBox = false): Team {\r\n\t\tif (copyFrom) {\r\n\t\t\treturn {\r\n\t\t\t\tname: `Copy of ${copyFrom.name}`,\r\n\t\t\t\tformat: copyFrom.format,\r\n\t\t\t\tfolder: copyFrom.folder,\r\n\t\t\t\tpackedTeam: copyFrom.packedTeam,\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tisBox: copyFrom.isBox,\r\n\t\t\t\tkey: '',\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst format = this.curFolder && !this.curFolder.endsWith('/') ? this.curFolder as ID : this.DEFAULT_FORMAT;\r\n\r\n\t\t\t// Check if this format needs a custom mod\r\n\t\t\tif (window.FormatModMapping && window.FormatModMapping[format]) {\r\n\t\t\t\tconst modid = window.FormatModMapping[format];\r\n\t\t\t\tif (!window.BattleTeambuilderTable[modid]) {\r\n\t\t\t\t\tDex.loadModData(modid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst folder = this.curFolder.endsWith('/') ? this.curFolder.slice(0, -1) : '';\r\n\t\t\treturn {\r\n\t\t\t\tname: `${isBox ? \"Box\" : \"Untitled\"} ${PS.teams.list.length + 1}`,\r\n\t\t\t\tformat,\r\n\t\t\t\tfolder,\r\n\t\t\t\tpackedTeam: '',\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tisBox,\r\n\t\t\t\tkey: '',\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass TeambuilderPanel extends PSRoomPanel<TeambuilderRoom> {\r\n\tstatic readonly id = 'teambuilder';\r\n\tstatic readonly routes = ['teambuilder'];\r\n\tstatic readonly Model = TeambuilderRoom;\r\n\tstatic readonly icon = <i class=\"fa fa-pencil-square-o\" aria-hidden></i>;\r\n\tstatic readonly title = 'Teambuilder';\r\n\tselectFolder = (e: MouseEvent) => {\r\n\t\tconst room = this.props.room;\r\n\t\tlet elem = e.target as HTMLElement | null;\r\n\t\tlet folder: string | null = null;\r\n\t\twhile (elem) {\r\n\t\t\tif (elem.getAttribute('data-href')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (elem.className === 'selectFolder') {\r\n\t\t\t\tfolder = elem.getAttribute('data-value') || '';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (elem.className === 'folderlist') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telem = elem.parentElement;\r\n\t\t}\r\n\t\tif (folder === null) return;\r\n\t\te.preventDefault();\r\n\t\te.stopImmediatePropagation();\r\n\t\tif (folder === '++') {\r\n\t\t\tPS.prompt(\"Folder name?\", '', { parentElem: elem!, okButton: \"Create\" }).then(name => {\r\n\t\t\t\tif (!name) return;\r\n\t\t\t\troom.curFolderKeep = `${name}/`;\r\n\t\t\t\troom.curFolder = `${name}/`;\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\troom.curFolder = folder;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\taddFormatFolder = (ev: Event) => {\r\n\t\tconst room = this.props.room;\r\n\t\tconst button = ev.currentTarget as HTMLButtonElement;\r\n\t\tconst folder = toID(button.value);\r\n\t\troom.curFolderKeep = folder;\r\n\t\troom.curFolder = folder;\r\n\t\tbutton.value = '';\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\t/** undefined: not dragging, null: dragging a new team */\r\n\tgetDraggedTeam(ev: DragEvent): Team | number | null {\r\n\t\tif (PS.dragging?.type === 'team') return PS.dragging.team;\r\n\r\n\t\tconst dataTransfer = ev.dataTransfer;\r\n\t\tif (!dataTransfer) return null;\r\n\r\n\t\tPS.dragging = { type: '?' };\r\n\t\tconsole.log(`dragging: ${dataTransfer.types as any} | ${[...dataTransfer.files]?.map(file => file.name) as any}`);\r\n\t\tif (!dataTransfer.types.includes?.('Files')) return null;\r\n\t\t// MDN says files will be empty except on a Drop event, but the spec says no such thing\r\n\t\t// in practice, Chrome gives this info but Firefox doesn't\r\n\t\tif (dataTransfer.files[0] && !dataTransfer.files[0].name.endsWith('.txt')) return null;\r\n\r\n\t\t// We're dragging a file! It might be a team!\r\n\t\tPS.dragging = {\r\n\t\t\ttype: 'team',\r\n\t\t\tteam: 0,\r\n\t\t\tfolder: null,\r\n\t\t};\r\n\t\treturn PS.dragging.team;\r\n\t}\r\n\tdragEnterTeam = (ev: DragEvent) => {\r\n\t\tconst draggedTeam = this.getDraggedTeam(ev);\r\n\t\tif (draggedTeam === null) return;\r\n\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-teamkey');\r\n\t\tconst team = value ? PS.teams.byKey[value] : null;\r\n\t\tif (!team || team === draggedTeam) return;\r\n\r\n\t\tconst iOver = PS.teams.list.indexOf(team);\r\n\t\tif (typeof draggedTeam === 'number') {\r\n\t\t\tif (iOver >= draggedTeam) (PS.dragging as any).team = iOver + 1;\r\n\t\t\t(PS.dragging as any).team = iOver;\r\n\t\t\tthis.forceUpdate();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst iDragged = PS.teams.list.indexOf(draggedTeam);\r\n\t\tif (iDragged < 0 || iOver < 0) return; // shouldn't happen\r\n\r\n\t\tPS.teams.list.splice(iDragged, 1);\r\n\t\t// by coincidence, splicing into iOver works in both directions\r\n\t\t// before: Dragged goes before Over, splice at i\r\n\t\t// after: Dragged goes after Over, splice at i - 1 + 1\r\n\t\tPS.teams.list.splice(iOver, 0, draggedTeam);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tdragEnterFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tPS.dragging.folder = value;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tdragLeaveFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tif (PS.dragging.folder === value) PS.dragging.folder = null;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tstatic extractDraggedTeam(ev: DragEvent): Promise<Team | null> | null {\r\n\t\tconst file = ev.dataTransfer?.files?.[0];\r\n\t\tif (!file) return null;\r\n\r\n\t\tlet name = file.name;\r\n\t\tif (name.slice(-4).toLowerCase() !== '.txt') {\r\n\t\t\t// PS.alert(`Your file \"${file.name}\" is not a valid team. Team files are \".txt\" files.`);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tname = name.slice(0, -4);\r\n\r\n\t\treturn file.text?.()?.then(result => {\r\n\t\t\tlet sets;\r\n\t\t\ttry {\r\n\t\t\t\tsets = PSTeambuilder.importTeam(result);\r\n\t\t\t} catch {\r\n\t\t\t\tPS.alert(`Your file \"${file.name}\" is not a valid team.`);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tlet format = '';\r\n\t\t\tconst bracketIndex = name.indexOf(']');\r\n\t\t\tlet isBox = false;\r\n\t\t\tif (bracketIndex >= 0) {\r\n\t\t\t\tformat = name.slice(1, bracketIndex);\r\n\t\t\t\tif (!format.startsWith('gen')) format = 'gen6' + format;\r\n\t\t\t\tif (format.endsWith('-box')) {\r\n\t\t\t\t\tformat = format.slice(0, -4);\r\n\t\t\t\t\tisBox = true;\r\n\t\t\t\t}\r\n\t\t\t\tname = name.slice(bracketIndex + 1).trim();\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\tformat: format as ID,\r\n\t\t\t\tfolder: '',\r\n\t\t\t\tpackedTeam: Teams.pack(sets),\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tkey: '',\r\n\t\t\t\tisBox,\r\n\t\t\t} satisfies Team;\r\n\t\t});\r\n\t}\r\n\tstatic addDraggedTeam(ev: DragEvent, folder?: string) {\r\n\t\tlet index: number = (PS.dragging as any)?.team;\r\n\t\tif (typeof index !== 'number') index = 0;\r\n\t\treturn this.extractDraggedTeam(ev)?.then(team => {\r\n\t\t\tif (!team) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (folder?.endsWith('/')) {\r\n\t\t\t\tteam.folder = folder.slice(0, -1);\r\n\t\t\t} else if (folder) {\r\n\t\t\t\tteam.format = folder as ID;\r\n\t\t\t}\r\n\t\t\tPS.teams.push(team);\r\n\t\t\tPS.teams.list.pop();\r\n\t\t\tPS.teams.list.splice(index, 0, team);\r\n\t\t\tPS.teams.save();\r\n\t\t\tPS.join('teambuilder' as RoomID);\r\n\t\t\tPS.update();\r\n\t\t});\r\n\t}\r\n\tdropFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tPS.dragging.folder = null;\r\n\t\tlet team = PS.dragging.team;\r\n\r\n\t\tif (typeof team === 'number') {\r\n\t\t\tTeambuilderPanel.addDraggedTeam(ev, value);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (value.endsWith('/')) {\r\n\t\t\tteam.folder = value.slice(0, -1);\r\n\t\t} else {\r\n\t\t\tteam.format = value as ID;\r\n\t\t}\r\n\t\tPS.teams.save();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tstatic handleDrop(ev: DragEvent) {\r\n\t\treturn !!this.addDraggedTeam(ev, (PS.rooms['teambuilder'] as TeambuilderRoom)?.curFolder);\r\n\t}\r\n\trenderFolder(value: string) {\r\n\t\tconst { room } = this.props;\r\n\t\tconst cur = room.curFolder === value;\r\n\t\tlet children;\r\n\t\tconst folderOpenIcon = cur ? 'fa-folder-open' : 'fa-folder';\r\n\t\tif (value.endsWith('/')) {\r\n\t\t\t// folder\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class={`fa ${folderOpenIcon}${value === '/' ? '-o' : ''}`}></i>,\r\n\t\t\t\tvalue.slice(0, -1) || '(uncategorized)',\r\n\t\t\t];\r\n\t\t} else if (value === '') {\r\n\t\t\tchildren = [\r\n\t\t\t\t<em>(all)</em>,\r\n\t\t\t];\r\n\t\t} else if (value === '++') {\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i>,\r\n\t\t\t\t<em>(add folder)</em>,\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class={`fa ${folderOpenIcon}-o`}></i>,\r\n\t\t\t\tvalue.slice(4) || '(uncategorized)',\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\t// folders were <div>s rather than <button>s because in theory it has\r\n\t\t// less weird interactions with HTML5 drag-and-drop (looking at Firefox)\r\n\t\t// modern browsers don't seem to have these bugs, so we're going to make\r\n\t\t// them buttons for now\r\n\t\tconst active = (PS.dragging as any)?.folder === value ? ' active' : '';\r\n\t\tif (cur) {\r\n\t\t\treturn <div\r\n\t\t\t\tclass=\"folder cur\" data-value={value}\r\n\t\t\t\tonDragEnter={this.dragEnterFolder} onDragLeave={this.dragLeaveFolder} onDrop={this.dropFolder}\r\n\t\t\t>\r\n\t\t\t\t<div class=\"folderhack3\">\r\n\t\t\t\t\t<div class=\"folderhack1\"></div><div class=\"folderhack2\"></div>\r\n\t\t\t\t\t<button class={`selectFolder${active}`} data-value={value}>{children}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t}\r\n\t\treturn <div\r\n\t\t\tclass=\"folder\" data-value={value}\r\n\t\t\tonDragEnter={this.dragEnterFolder} onDragLeave={this.dragLeaveFolder} onDrop={this.dropFolder}\r\n\t\t>\r\n\t\t\t<button class={`selectFolder${active}`} data-value={value}>{children}</button>\r\n\t\t</div>;\r\n\t}\r\n\trenderFolderList() {\r\n\t\tconst room = this.props.room;\r\n\t\t// The folder list isn't actually saved anywhere:\r\n\t\t// it's regenerated anew from the team list every time.\r\n\r\n\t\t// (This is why folders you create will automatically disappear\r\n\t\t// if you leave them without adding anything to them.)\r\n\r\n\t\tconst folderTable: { [folder: string]: 1 | undefined } = { '': 1 };\r\n\t\tconst folders: string[] = [];\r\n\t\tfor (const team of PS.teams.list) {\r\n\t\t\tconst folder = team.folder;\r\n\t\t\tif (folder && !(`${folder}/` in folderTable)) {\r\n\t\t\t\tfolders.push(`${folder}/`);\r\n\t\t\t\tfolderTable[`${folder}/`] = 1;\r\n\t\t\t\tif (!('/' in folderTable)) {\r\n\t\t\t\t\tfolders.push('/');\r\n\t\t\t\t\tfolderTable['/'] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst format = team.format || room.DEFAULT_FORMAT;\r\n\t\t\tif (!(format in folderTable)) {\r\n\t\t\t\tfolders.push(format);\r\n\t\t\t\tfolderTable[format] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (room.curFolderKeep.endsWith('/') || room.curFolder.endsWith('/')) {\r\n\t\t\tif (!('/' in folderTable)) {\r\n\t\t\t\tfolders.push('/');\r\n\t\t\t\tfolderTable['/'] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!(room.curFolderKeep in folderTable)) {\r\n\t\t\tfolderTable[room.curFolderKeep] = 1;\r\n\t\t\tfolders.push(room.curFolderKeep);\r\n\t\t}\r\n\t\tif (!(room.curFolder in folderTable)) {\r\n\t\t\tfolderTable[room.curFolder] = 1;\r\n\t\t\tfolders.push(room.curFolder);\r\n\t\t}\r\n\r\n\t\tPSUtils.sortBy(folders, folder => [\r\n\t\t\tfolder.endsWith('/') ? 10 : -parseInt(folder.charAt(3), 10),\r\n\t\t\tfolder,\r\n\t\t]);\r\n\r\n\t\tlet renderedFormatFolders = [\r\n\t\t\t<div class=\"foldersep\"></div>,\r\n\t\t\t<div class=\"folder\"><button\r\n\t\t\t\tname=\"format\" value=\"\" data-selecttype=\"teambuilder\"\r\n\t\t\t\tclass=\"selectFolder\" data-href=\"/formatdropdown\" onChange={this.addFormatFolder}\r\n\t\t\t>\r\n\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i><em>(add format folder)</em>\r\n\t\t\t</button></div>,\r\n\t\t];\r\n\r\n\t\tlet renderedFolders: preact.ComponentChild[] = [];\r\n\r\n\t\t/** 0 = folder, 1-9 = format generation */\r\n\t\tlet gen = -1;\r\n\t\tfor (let format of folders) {\r\n\t\t\tconst newGen = format.endsWith('/') ? 0 : parseInt(format.charAt(3), 10);\r\n\t\t\tif (gen !== newGen) {\r\n\t\t\t\tgen = newGen;\r\n\t\t\t\tif (gen === 0) {\r\n\t\t\t\t\trenderedFolders.push(...renderedFormatFolders);\r\n\t\t\t\t\trenderedFormatFolders = [];\r\n\t\t\t\t\trenderedFolders.push(<div class=\"foldersep\"></div>);\r\n\t\t\t\t\trenderedFolders.push(<div class=\"folder\"><h3>Folders</h3></div>);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderedFolders.push(<div class=\"folder\"><h3>Gen {gen}</h3></div>);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trenderedFolders.push(this.renderFolder(format));\r\n\t\t}\r\n\t\trenderedFolders.push(...renderedFormatFolders);\r\n\r\n\t\treturn <div class=\"folderlist\" onClick={this.selectFolder}>\r\n\t\t\t<div class=\"folderlistbefore\"></div>\r\n\r\n\t\t\t{this.renderFolder('')}\r\n\t\t\t{renderedFolders}\r\n\t\t\t<div class=\"foldersep\"></div>\r\n\t\t\t{this.renderFolder('++')}\r\n\r\n\t\t\t<div class=\"folderlistafter\"></div>\r\n\t\t</div>;\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\t\tlet teams: (Team | null)[] = PS.teams.list.slice();\r\n\r\n\t\tlet isDragging = false;\r\n\t\tif (PS.dragging?.type === 'team' && typeof PS.dragging.team === 'number') {\r\n\t\t\tteams.splice(PS.dragging.team, 0, null);\r\n\t\t\tisDragging = true;\r\n\t\t} else if (PS.teams.deletedTeams.length) {\r\n\t\t\tconst undeleteIndex = PS.teams.deletedTeams[PS.teams.deletedTeams.length - 1][1];\r\n\t\t\tteams.splice(undeleteIndex, 0, null);\r\n\t\t}\r\n\r\n\t\tlet filterFolder: string | null = null;\r\n\t\tlet filterFormat: string | null = null;\r\n\t\tif (room.curFolder) {\r\n\t\t\tif (room.curFolder.endsWith('/')) {\r\n\t\t\t\tfilterFolder = room.curFolder.slice(0, -1);\r\n\t\t\t\tteams = teams.filter(team => !team || team.folder === filterFolder);\r\n\t\t\t} else {\r\n\t\t\t\tfilterFormat = room.curFolder;\r\n\t\t\t\tteams = teams.filter(team => !team || team.format === filterFormat);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<div class=\"folderpane\">\r\n\t\t\t\t{this.renderFolderList()}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"teampane\">\r\n\t\t\t\t{filterFolder ? (\r\n\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t<i class=\"fa fa-folder-open\" aria-hidden></i> {filterFolder} {}\r\n\t\t\t\t\t\t<button class=\"button small\" style=\"margin-left:5px\" name=\"renameFolder\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-pencil\" aria-hidden></i> Rename\r\n\t\t\t\t\t\t</button> {}\r\n\t\t\t\t\t\t<button class=\"button small\" style=\"margin-left:5px\" name=\"promptDeleteFolder\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-times\" aria-hidden></i> Remove\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t) : filterFolder === '' ? (\r\n\t\t\t\t\t<h2><i class=\"fa fa-folder-open-o\" aria-hidden></i> Teams not in any folders</h2>\r\n\t\t\t\t) : filterFormat ? (\r\n\t\t\t\t\t<h2><i class=\"fa fa-folder-open-o\" aria-hidden></i> {filterFormat} <small>({teams.length})</small></h2>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<h2>All Teams <small>({teams.length})</small></h2>\r\n\t\t\t\t)}\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button data-cmd=\"/newteam\" class=\"button big\"><i class=\"fa fa-plus-circle\" aria-hidden></i> New Team</button> {}\r\n\t\t\t\t\t<button data-cmd=\"/newteam box\" class=\"button\"><i class=\"fa fa-archive\" aria-hidden></i> New Box</button>\r\n\t\t\t\t</p>\r\n\t\t\t\t<ul class=\"teamlist\">\r\n\t\t\t\t\t{teams.map(team => team ? (\r\n\t\t\t\t\t\t<li key={team.key} onDragEnter={this.dragEnterTeam} data-teamkey={team.key}>\r\n\t\t\t\t\t\t\t<TeamBox team={team} /> {}\r\n\t\t\t\t\t\t\t{!team.uploaded && <button data-cmd={`/deleteteam ${team.key}`} class=\"option\">\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-trash\" aria-hidden></i> Delete\r\n\t\t\t\t\t\t\t</button>} {}\r\n\t\t\t\t\t\t\t{team.uploaded?.private ? (\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-cloud gray\"></i>\r\n\t\t\t\t\t\t\t) : team.uploaded ? (\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-globe gray\"></i>\r\n\t\t\t\t\t\t\t) : team.teamid ? (\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-plug gray\"></i>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : isDragging ? (\r\n\t\t\t\t\t\t<li key=\"dragging\">\r\n\t\t\t\t\t\t\t<div class=\"team\"></div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<li key=\"undelete\">\r\n\t\t\t\t\t\t\t<button data-cmd=\"/undeleteteam\" class=\"option\">\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i> Undo delete\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button data-cmd=\"/newteam bottom\" class=\"button\"><i class=\"fa fa-plus-circle\" aria-hidden></i> New Team</button> {}\r\n\t\t\t\t\t<button data-cmd=\"/newteam box bottom\" class=\"button\"><i class=\"fa fa-archive\" aria-hidden></i> New Box</button>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.addRoomType(TeambuilderPanel);\r\n"],"mappings":"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","ignoreList":[]}