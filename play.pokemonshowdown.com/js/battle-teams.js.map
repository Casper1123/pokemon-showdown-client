{"version":3,"file":"battle-teams.js","names":["Teams","_class","_proto","prototype","pack","team","getIv","ivs","s","undefined","toString","buf","_i2","length","set","name","species","speciesid","packName","item","ability","moves","map","join","nature","evs","gender","shiny","level","happiness","pokeball","hpType","gigantamax","dynamaxLevel","teraType","replace","unpack","i","j","lastI","push","indexOf","substring","Dex","get","baseSpecies","items","abilities","includes","split","moveid","evstring","hp","Number","atk","def","spa","spd","spe","parseInt","misc","unpackSpeciesOnly","slice","k","exportSet","dex","arguments","newFormat","text","gen","_i4","_set$moves2","move","startsWith","_set$moves3","first","BattleNatures","_i6","_Dex$statNames2","statNames","_set$evs","stat","plusMinus","plus","minus","ev","BattleStatNames","_i8","_Dex$statNames4","isNaN","_i0","_ref2","_set$moves4","export","sets","_i11"],"sources":["../src/battle-teams.ts"],"sourcesContent":["import { Dex, type ModdedDex } from \"./battle-dex\";\r\nimport { BattleNatures, BattleStatNames } from \"./battle-dex-data\";\r\n\r\nexport declare namespace Teams {\r\n\t/**\r\n\t * Teams.PokemonSet can be sparse, in which case that entry should be\r\n\t * inferred from the rest of the set, according to sensible\r\n\t * defaults.\r\n\t */\r\n\texport interface FullPokemonSet {\r\n\t\t/** Defaults to species name (not including forme), like in games */\r\n\t\tname: string;\r\n\t\tspecies: string;\r\n\t\t/** Defaults to no item */\r\n\t\titem?: string;\r\n\t\t/** Defaults to no ability (error in Gen 3+) */\r\n\t\tability?: string;\r\n\t\tmoves: string[];\r\n\t\t/** Defaults to no nature (error in Gen 3+) */\r\n\t\tnature?: Dex.NatureName;\r\n\t\t/** Defaults to random legal gender, NOT subject to gender ratios */\r\n\t\tgender?: string;\r\n\t\t/** Defaults to flat 252's (200's/0's in Let's Go) (error in gen 3+) */\r\n\t\tevs: Partial<Dex.StatsTable>;\r\n\t\t/** Defaults to whatever makes sense - flat 31's unless you have Gyro Ball etc */\r\n\t\tivs: Dex.StatsTable;\r\n\t\t/** Defaults as you'd expect (100 normally, 50 in VGC-likes, 5 in LC) */\r\n\t\tlevel: number;\r\n\t\t/** Defaults to no (error if shiny event) */\r\n\t\tshiny: boolean;\r\n\t\t/** Defaults to 255 unless you have Frustration, in which case 0 */\r\n\t\thappiness: number;\r\n\t\t/** Defaults to event required ball, otherwise Pok√© Ball */\r\n\t\tpokeball: string;\r\n\t\t/** Defaults to the type of your Hidden Power in Moves, otherwise Dark */\r\n\t\thpType?: string;\r\n\t\t/** Defaults to 10 */\r\n\t\tdynamaxLevel?: number;\r\n\t\t/** Defaults to no (can only be yes for certain Pokemon) */\r\n\t\tgigantamax?: boolean;\r\n\t\t/** Defaults to the primary type */\r\n\t\tteraType?: string;\r\n\t}\r\n\texport interface PokemonSet extends Partial<FullPokemonSet> {\r\n\t\t/** Defaults to species name (not including forme), like in games */\r\n\t\tspecies: string;\r\n\t\tmoves: string[];\r\n\t}\r\n}\r\n\r\nexport const Teams = new class {\r\n\tpack(team: Teams.PokemonSet[] | null): string {\r\n\t\tif (!team) return '';\r\n\r\n\t\tfunction getIv(ivs: Dex.StatsTable, s: keyof Dex.StatsTable): string {\r\n\t\t\treturn ivs[s] === 31 || ivs[s] === undefined ? '' : ivs[s].toString();\r\n\t\t}\r\n\r\n\t\tlet buf = '';\r\n\t\tfor (const set of team) {\r\n\t\t\tif (buf) buf += ']';\r\n\r\n\t\t\t// name\r\n\t\t\tbuf += (set.name || set.species);\r\n\r\n\t\t\t// species\r\n\t\t\tconst speciesid = this.packName(set.species || set.name);\r\n\t\t\tbuf += `|${this.packName(set.name || set.species) === speciesid ? '' : speciesid}`;\r\n\r\n\t\t\t// item\r\n\t\t\tbuf += `|${this.packName(set.item)}`;\r\n\r\n\t\t\t// ability\r\n\t\t\tbuf += `|${this.packName(set.ability)}`;\r\n\r\n\t\t\t// moves\r\n\t\t\tbuf += '|' + set.moves.map(this.packName).join(',');\r\n\r\n\t\t\t// nature\r\n\t\t\tbuf += `|${set.nature || ''}`;\r\n\r\n\t\t\t// evs\r\n\t\t\tlet evs = '|';\r\n\t\t\tif (set.evs) {\r\n\t\t\t\tevs = `|${set.evs['hp'] || ''},${set.evs['atk'] || ''},${set.evs['def'] || ''},` +\r\n\t\t\t\t\t`${set.evs['spa'] || ''},${set.evs['spd'] || ''},${set.evs['spe'] || ''}`;\r\n\t\t\t}\r\n\t\t\tif (evs === '|,,,,,') {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t} else {\r\n\t\t\t\tbuf += evs;\r\n\t\t\t}\r\n\r\n\t\t\t// gender\r\n\t\t\tif (set.gender) {\r\n\t\t\t\tbuf += `|${set.gender}`;\r\n\t\t\t} else {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t}\r\n\r\n\t\t\t// ivs\r\n\t\t\tlet ivs = '|';\r\n\t\t\tif (set.ivs) {\r\n\t\t\t\tivs = `|${getIv(set.ivs, 'hp')},${getIv(set.ivs, 'atk')},${getIv(set.ivs, 'def')},` +\r\n\t\t\t\t\t`${getIv(set.ivs, 'spa')},${getIv(set.ivs, 'spd')},${getIv(set.ivs, 'spe')}`;\r\n\t\t\t}\r\n\t\t\tif (ivs === '|,,,,,') {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t} else {\r\n\t\t\t\tbuf += ivs;\r\n\t\t\t}\r\n\r\n\t\t\t// shiny\r\n\t\t\tif (set.shiny) {\r\n\t\t\t\tbuf += '|S';\r\n\t\t\t} else {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t}\r\n\r\n\t\t\t// level\r\n\t\t\tif (set.level && set.level !== 100) {\r\n\t\t\t\tbuf += `|${set.level}`;\r\n\t\t\t} else {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t}\r\n\r\n\t\t\t// happiness\r\n\t\t\tif (set.happiness !== undefined && set.happiness !== 255) {\r\n\t\t\t\tbuf += `|${set.happiness}`;\r\n\t\t\t} else {\r\n\t\t\t\tbuf += '|';\r\n\t\t\t}\r\n\r\n\t\t\tif (set.pokeball || set.hpType || set.gigantamax ||\r\n\t\t\t\t(set.dynamaxLevel !== undefined && set.dynamaxLevel !== 10) || set.teraType) {\r\n\t\t\t\tbuf += `,${set.hpType || ''}`;\r\n\t\t\t\tbuf += `,${this.packName(set.pokeball || '')}`;\r\n\t\t\t\tbuf += `,${set.gigantamax ? 'G' : ''}`;\r\n\t\t\t\tbuf += `,${set.dynamaxLevel !== undefined && set.dynamaxLevel !== 10 ? set.dynamaxLevel : ''}`;\r\n\t\t\t\tbuf += `,${set.teraType || ''}`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn buf;\r\n\t}\r\n\t/** Very similar to toID but without the lowercase conversion */\r\n\tpackName(this: void, name: string | undefined | null) {\r\n\t\tif (!name) return '';\r\n\t\treturn name.replace(/[^A-Za-z0-9]+/g, '');\r\n\t}\r\n\r\n\tunpack(buf: string): Teams.PokemonSet[] {\r\n\t\tif (!buf) return [];\r\n\r\n\t\tconst team = [];\r\n\t\tlet i = 0;\r\n\t\tlet j = 0;\r\n\t\tlet lastI = 0;\r\n\r\n\t\twhile (true) {\r\n\t\t\tconst set: Teams.PokemonSet = {} as any;\r\n\t\t\tteam.push(set);\r\n\r\n\t\t\t// name\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tconst name = buf.substring(i, j);\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// species\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tconst species = Dex.species.get(buf.substring(i, j) || name);\r\n\t\t\tset.species = species.name;\r\n\t\t\tif (species.baseSpecies !== name) set.name = name;\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// item\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tset.item = Dex.items.get(buf.substring(i, j)).name;\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// ability\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tconst ability = Dex.abilities.get(buf.substring(i, j)).name;\r\n\t\t\tset.ability = (species.abilities &&\r\n\t\t\t\t['', '0', '1', 'H', 'S'].includes(ability) ? species.abilities[ability as '0' || '0'] : ability);\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// moves\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tset.moves = buf.substring(i, j).split(',').map(\r\n\t\t\t\tmoveid => Dex.moves.get(moveid).name\r\n\t\t\t);\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// nature\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tset.nature = buf.substring(i, j) as Dex.NatureName;\r\n\t\t\tif (set.nature as any === 'undefined') delete set.nature;\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// evs\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tif (j !== i) {\r\n\t\t\t\tconst evstring = buf.substring(i, j);\r\n\t\t\t\tif (evstring.length > 5) {\r\n\t\t\t\t\tconst evs = evstring.split(',');\r\n\t\t\t\t\tset.evs = {\r\n\t\t\t\t\t\thp: Number(evs[0]) || 0,\r\n\t\t\t\t\t\tatk: Number(evs[1]) || 0,\r\n\t\t\t\t\t\tdef: Number(evs[2]) || 0,\r\n\t\t\t\t\t\tspa: Number(evs[3]) || 0,\r\n\t\t\t\t\t\tspd: Number(evs[4]) || 0,\r\n\t\t\t\t\t\tspe: Number(evs[5]) || 0,\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if (evstring === '0') {\r\n\t\t\t\t\tset.evs = { hp: 0, atk: 0, def: 0, spa: 0, spd: 0, spe: 0 };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// gender\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tif (i !== j) set.gender = buf.substring(i, j);\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// ivs\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tif (j !== i) {\r\n\t\t\t\tconst ivs = buf.substring(i, j).split(',');\r\n\t\t\t\tset.ivs = {\r\n\t\t\t\t\thp: ivs[0] === '' ? 31 : Number(ivs[0]),\r\n\t\t\t\t\tatk: ivs[1] === '' ? 31 : Number(ivs[1]),\r\n\t\t\t\t\tdef: ivs[2] === '' ? 31 : Number(ivs[2]),\r\n\t\t\t\t\tspa: ivs[3] === '' ? 31 : Number(ivs[3]),\r\n\t\t\t\t\tspd: ivs[4] === '' ? 31 : Number(ivs[4]),\r\n\t\t\t\t\tspe: ivs[5] === '' ? 31 : Number(ivs[5]),\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// shiny\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tif (i !== j) set.shiny = true;\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// level\r\n\t\t\tj = buf.indexOf('|', i);\r\n\t\t\tif (i !== j) set.level = parseInt(buf.substring(i, j), 10);\r\n\t\t\ti = j + 1;\r\n\r\n\t\t\t// happiness\r\n\t\t\tj = buf.indexOf(']', i);\r\n\t\t\tlet misc;\r\n\t\t\tif (j < 0) {\r\n\t\t\t\tif (i < buf.length) misc = buf.substring(i).split(',', 6);\r\n\t\t\t} else {\r\n\t\t\t\tif (i !== j) misc = buf.substring(i, j).split(',', 6);\r\n\t\t\t}\r\n\t\t\tif (misc) {\r\n\t\t\t\tset.happiness = (misc[0] ? Number(misc[0]) : undefined);\r\n\t\t\t\tset.hpType = misc[1] || undefined;\r\n\t\t\t\tset.pokeball = misc[2] || undefined;\r\n\t\t\t\tset.gigantamax = !!misc[3] || undefined;\r\n\t\t\t\tset.dynamaxLevel = (misc[4] ? Number(misc[4]) : undefined);\r\n\t\t\t\tset.teraType = misc[5] || undefined;\r\n\t\t\t}\r\n\t\t\ti = j + 1;\r\n\t\t\tif (j < 0 || i <= lastI) break;\r\n\t\t\tlastI = i;\r\n\t\t}\r\n\r\n\t\treturn team;\r\n\t}\r\n\tunpackSpeciesOnly(buf: string): string[] {\r\n\t\tif (!buf) return [];\r\n\r\n\t\tconst team = [];\r\n\t\tlet i = 0;\r\n\t\tlet lastI = 0;\r\n\r\n\t\twhile (true) {\r\n\t\t\tconst name = buf.slice(i, buf.indexOf('|', i));\r\n\t\t\ti = buf.indexOf('|', i) + 1;\r\n\r\n\t\t\tteam.push(buf.slice(i, buf.indexOf('|', i)) || name);\r\n\r\n\t\t\tfor (let k = 0; k < 9; k++) {\r\n\t\t\t\ti = buf.indexOf('|', i) + 1;\r\n\t\t\t}\r\n\r\n\t\t\ti = buf.indexOf(']', i) + 1;\r\n\r\n\t\t\tif (i < 1 || i <= lastI) break;\r\n\t\t\tlastI = i;\r\n\t\t}\r\n\r\n\t\treturn team;\r\n\t}\r\n\t/**\r\n\t * (You may wish to manually add two spaces to the end of every line so\r\n\t * linebreaks are preserved in Markdown; I assume mostly for Reddit.)\r\n\t */\r\n\texportSet(set: Teams.PokemonSet, dex: ModdedDex = Dex, newFormat?: boolean) {\r\n\t\tlet text = '';\r\n\r\n\t\t// core\r\n\t\tif (set.name && set.name !== set.species) {\r\n\t\t\ttext += `${set.name} (${set.species})`;\r\n\t\t} else {\r\n\t\t\ttext += `${set.species}`;\r\n\t\t}\r\n\t\tif (set.gender === 'M') text += ` (M)`;\r\n\t\tif (set.gender === 'F') text += ` (F)`;\r\n\t\tif (!newFormat && set.item) {\r\n\t\t\ttext += ` @ ${set.item}`;\r\n\t\t}\r\n\t\ttext += `\\n`;\r\n\t\tif ((set.item || set.ability || dex.gen >= 2) && newFormat) {\r\n\t\t\tif (set.ability || dex.gen >= 3) text += `[${set.ability || '(select ability)'}]`;\r\n\t\t\tif (set.item || dex.gen >= 2) text += ` @ ${set.item || \"(no item)\"}`;\r\n\t\t\ttext += `\\n`;\r\n\t\t} else if (set.ability && set.ability !== 'No Ability') {\r\n\t\t\ttext += `Ability: ${set.ability}\\n`;\r\n\t\t}\r\n\r\n\t\tif (newFormat) {\r\n\t\t\tif (set.moves) {\r\n\t\t\t\tfor (let move of set.moves) {\r\n\t\t\t\t\tif (move.startsWith('Hidden Power ')) {\r\n\t\t\t\t\t\tconst hpType = move.slice(13);\r\n\t\t\t\t\t\tmove = move.slice(0, 13);\r\n\t\t\t\t\t\tmove = `${move}[${hpType}]`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext += `- ${move || ''}\\n`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (let i = set.moves?.length || 0; i < 4; i++) {\r\n\t\t\t\ttext += `- \\n`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// stats\r\n\t\tlet first = true;\r\n\t\tif (set.evs || set.nature) {\r\n\t\t\tconst nature = newFormat ? BattleNatures[set.nature as 'Serious'] : null;\r\n\t\t\tfor (const stat of Dex.statNames) {\r\n\t\t\t\tconst plusMinus = !newFormat ? '' : nature?.plus === stat ? '+' : nature?.minus === stat ? '-' : '';\r\n\t\t\t\tconst ev = set.evs?.[stat] || '';\r\n\t\t\t\tif (ev === '' && !plusMinus) continue;\r\n\t\t\t\ttext += first ? `EVs: ` : ` / `;\r\n\t\t\t\tfirst = false;\r\n\t\t\t\ttext += `${ev}${plusMinus} ${BattleStatNames[stat]}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!first) {\r\n\t\t\tif (set.nature && newFormat) text += ` (${set.nature})`;\r\n\t\t\ttext += `\\n`;\r\n\t\t}\r\n\t\tif (set.nature && !newFormat) {\r\n\t\t\ttext += `${set.nature} Nature\\n`;\r\n\t\t} else if (['Hardy', 'Docile', 'Serious', 'Bashful', 'Quirky'].includes(set.nature!)) {\r\n\t\t\ttext += `${set.nature!} Nature\\n`;\r\n\t\t}\r\n\t\tfirst = true;\r\n\t\tif (set.ivs) {\r\n\t\t\tfor (const stat of Dex.statNames) {\r\n\t\t\t\tif (set.ivs[stat] === undefined || isNaN(set.ivs[stat]) || set.ivs[stat] === 31) continue;\r\n\t\t\t\tif (first) {\r\n\t\t\t\t\ttext += `IVs: `;\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttext += ` / `;\r\n\t\t\t\t}\r\n\t\t\t\ttext += `${set.ivs[stat]} ${BattleStatNames[stat]}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!first) {\r\n\t\t\ttext += `\\n`;\r\n\t\t}\r\n\r\n\t\t// details\r\n\t\tif (set.level && set.level !== 100) {\r\n\t\t\ttext += `Level: ${set.level}\\n`;\r\n\t\t}\r\n\t\tif (set.shiny) {\r\n\t\t\ttext += !newFormat ? `Shiny: Yes\\n` : `Shiny\\n`;\r\n\t\t}\r\n\t\tif (typeof set.happiness === 'number' && set.happiness !== 255 && !isNaN(set.happiness)) {\r\n\t\t\ttext += `Happiness: ${set.happiness}\\n`;\r\n\t\t}\r\n\t\tif (typeof set.dynamaxLevel === 'number' && set.dynamaxLevel !== 255 && !isNaN(set.dynamaxLevel)) {\r\n\t\t\ttext += `Dynamax Level: ${set.dynamaxLevel}\\n`;\r\n\t\t}\r\n\t\tif (set.gigantamax) {\r\n\t\t\ttext += !newFormat ? `Gigantamax: Yes\\n` : `Gigantamax\\n`;\r\n\t\t}\r\n\t\tif (set.teraType) {\r\n\t\t\ttext += `Tera Type: ${set.teraType}\\n`;\r\n\t\t}\r\n\r\n\t\tif (!newFormat) {\r\n\t\t\tfor (let move of set.moves || []) {\r\n\t\t\t\tif (move.startsWith('Hidden Power ')) {\r\n\t\t\t\t\tconst hpType = move.slice(13);\r\n\t\t\t\t\tmove = move.slice(0, 13);\r\n\t\t\t\t\tmove = !newFormat ? `${move}[${hpType}]` : `${move}${hpType}`;\r\n\t\t\t\t}\r\n\t\t\t\ttext += `- ${move}\\n`;\r\n\t\t\t}\r\n\t\t\tfor (let i = set.moves?.length || 0; i < 4; i++) {\r\n\t\t\t\ttext += `- \\n`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttext += `\\n`;\r\n\t\treturn text;\r\n\t}\r\n\t// TODO: finish this impl\r\n\t// getFullSet(set: Teams.PokemonSet, dex: ModdedDex): Teams.FullPokemonSet {\r\n\t// \t//\r\n\t// }\r\n\texport(sets: Teams.PokemonSet[], dex?: ModdedDex, newFormat?: boolean) {\r\n\t\tlet text = '';\r\n\t\tfor (const set of sets) {\r\n\t\t\t// core\r\n\t\t\ttext += Teams.exportSet(set, dex, newFormat);\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n};\r\n"],"mappings":"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","ignoreList":[]}